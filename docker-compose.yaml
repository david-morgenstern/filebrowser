services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "666:666"
    volumes:
      # Primary data volume (required)
      - ${DATA_PATH}:/app/data/main:ro
      # Additional volumes - add more as needed in .env
      # Format: - ${VOLUME_NAME}:/app/data/folder_name:ro
      - ${DOWNLOADS_PATH:-./placeholder}:/app/data/downloads:ro
      - ${EXTRA_PATH_1:-./placeholder}:/app/data/extra1:ro
      - ${EXTRA_PATH_2:-./placeholder}:/app/data/extra2:ro
      # Database persistence in user's home directory (~/.filebrowser/db)
      - ${HOME}/.filebrowser/db:/app/db
      # Development: local code mounting
      - ./app/templates/:/app/templates/
      - ./app/app.py:/app/app.py
    command: ["app:app", "--host", "0.0.0.0", "--port", "666", "--reload"]
    env_file:
      - .env
